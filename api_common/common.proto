syntax = "proto3";

import "google/protobuf/empty.proto";

package common;

option go_package = "/";

service Paxos {
  rpc ProcessTxn(common.ProcessTxnRequest) returns (google.protobuf.Empty);
  rpc Prepare(common.Prepare) returns (google.protobuf.Empty);
  rpc Promise(common.Promise) returns (google.protobuf.Empty);
}

message ProcessTxnRequest {
  string msgID = 1;
  string sender = 2;
  string receiver = 3;
  float amount = 4;
}

message Ballot {
  int32 termNumber = 1;
  int32 serverNumber = 2;
}

message Prepare {
  Ballot ballotNum = 1;
}

message Promise {
  bool promiseAck = 1;
  Ballot ballotNum = 2;
  Ballot acceptNum = 3;
  repeated ProcessTxnRequest acceptVal = 4;
  repeated ProcessTxnRequest localVal = 5;
}